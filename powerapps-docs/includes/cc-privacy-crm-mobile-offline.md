---
ms.openlocfilehash: 787ff9592604f9a9bce1929e4d429a39da5ec48a
ms.sourcegitcommit: 982cab99d84663656a8f73d48c6fae03e7517321
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/28/2019
ms.locfileid: "67456825"
---
Dynamics 365 Mobile Offline を有効にすると、ユーザーがオフラインで使用できるようにしたエンティティに基づいて、Dynamics 365 (オンライン) のデータが、Azure クラウドを使用する SQL Azure データベースにダウンロードされます。 ユーザーがオフライン機能を持つモバイル アプリから Azure クラウド サービスに接続すると、SQL Azure データベースからモバイル デバイス上のローカル データベースにデータがダウンロードされます。 Azure クラウド上の SQL Azure データベースとオフライン機能を持つ Dynamics 365 モバイル アプリの間のデータ転送は、セキュリティ保護された SSL 接続を使用して行われます。 最終的に、顧客データは SQL Azure データベースとモバイル デバイスに格納されます。  
  
 管理者は、セキュリティ ロールと Dynamics 365 Mobile のプロファイルのカスタマイズを使用して、組織のユーザーが Microsoft Dynamics 365 Mobile Offline アプリケーションでオフラインになることを許可するかどうかを決定します。 Dynamics 365 の管理者は、[設定] > [Mobile Offline] ダイアログ ボックスの同期フィルターの設定を使用して、オフライン同期によってダウンロードされるエンティティを構成できます。  
  
 ユーザーのデバイスに格納されるデータは、Microsoft ではなくお客様によって制御されることに注意してください。 管理者は、ユーザーのセキュリティ ロールまたはエンティティのレベルで、抽出可能なデータを完全に制御できます。 ただし、データが抽出された後は、Dynamics 365 Online によって提供されるセキュリティ境界が適用されます。  
  
 Mobile Offline の機能に関連する Azure のコンポーネントとサービスの一覧を以下に示します。  
  
 **注:** その他の Azure サービスについて詳しくは、[Microsoft Azure セキュリティ センター](https://azure.microsoft.com/support/trust-center/)をご覧ください。  
  
 **Cloud Services (Web ロール)**  
  
 Mobile Offline では 2 つのクラウド サービスが利用されます。1 つはプロビジョニング用で、もう 1 つはデータ同期用です。  
  
 プロビジョニング サービスの単一の Web ロールは、Dynamics 365 から送られてくるさまざまなイベント (プロビジョニングやプロビジョニング解除など) のメッセージを、Service Bus (SB) キューから読み取ります。 その後、組織のデータベースを作成/削除し、データの同期 SB キューで定期的な作業項目 (メッセージ) を送信することで、それらのメッセージを処理します。 このプロセスの間に、CSCFG ファイルまたは Dynamics 365 SW API にある構成データを読み書きします。  
  
 データ同期サービスには 2 つの Web ロールがあります。 1 つの Web ロールはステージング データベースのスキーマおよびデータと、Dynamics 365 組織のメタデータおよびデータとの同期を維持し、もう 1 つの Web ロールは同期サーバーを実行して、クライアントの同期要求を処理します。 最初の Web ロールは、さまざまな組織のデータ同期 SB キューからのメッセージを処理した後、Dynamics 365 に接続してメタデータとデータの変更を取得してから、それらをステージング データベースにコミットします。 また、システムに入ったりシステムから出たりする組織とそれらのクライアント モデルで同期サーバーを構成するジョブも行います。 もう 1 つの Web ロールは、同期サーバー (アンマネージド コード) を実行して、管理エンドポイントと同期エンドポイントをホストします。 管理エンドポイントは、他の Web ロールによって構成データを送信するために使用されます。 同期エンドポイントは、外部クライアント (Dynamics 365 Mobile アプリケーション) によってデータ同期を行うために使用されます。プロビジョニング サービスと同じように、2 つのロールはどちらも、CSCFG ファイルまたは Dynamics 365 SW API にある構成データを読み書きします。  
  
 **キュー**  
  
 Mobile Offline では、Dynamics 365 と Azure の間のメッセージ交換に Azure キューが使用されます。 クラウド サービスによって処理される作業項目を維持するために使用されます。 各メッセージには、組織 ID、データを同期するエンティティの名前、組織の OData エンドポイントの接続文字列などの情報が格納されます。  
  
 **SQL Database**  
  
 Mobile Offline では、Azure SQL Storage を使用して次のものが格納されます。  
  
-   Dynamics 365 組織からレプリケートされたデータ、およびクライアントの同期要求に対応するためのデータ。  
  
-   組織のデータベース接続文字列などの構成データ。  
  
 **ストレージ**  
  
 Mobile Offline では、Azure Blob Storage を使用して、クラウド サービスによって生成されたログとトレースが格納されます。  
  
 **Active Directory サービス**  
  
 Mobile Offline では、Azure Active Directory サービスを使用して、Dynamics 365、SW API、Azure Management API などの他のサービスでの認証が行われます。  
  
 **Azure DNS**  
  
 Mobile Offline では、Azure DNS を使用して、組織名に基づき、適切なクラウド サービス エンドポイントにクライアント要求がリダイレクトされます。  
  
 **Azure Virtual Network**  
  
 Azure Virtual Network (VNet) は、クラウドでのお客様自身のネットワークを表したものです。 Dynamics 365 製品チームは、お客様の Azure ネットワークの設定を制御し、DHCP アドレス ブロック、DNS の設定、セキュリティ ポリシー、およびルーティングを定義することがきます。  
  
 **Azure Load Balancer**  
  
 Azure Load Balancer では、アプリケーションに優れた可用性とネットワーク パフォーマンスが提供されます。 レイヤー 4 (TCP、UDP) タイプのロード バランサーであり、ロード バランサー セットで定義されたクラウド サービスや仮想マシンの正常なサービス インスタンス間に、受信トラフィックを分散します。 これを使用して、デプロイ内のエンド ポイントの負荷分散を行います。
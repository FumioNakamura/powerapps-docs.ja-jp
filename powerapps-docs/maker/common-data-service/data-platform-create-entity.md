---
title: ユーザー定義エンティティの作成 | Microsoft Docs
description: PowerApps でユーザー定義エンティティの作成方法について説明します。
author: Mattp123
ms.service: powerapps
ms.component: cds
ms.topic: quickstart
ms.date: 05/01/2018
ms.author: matp
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="create-a-custom-entity"></a>ユーザー定義エンティティの作成
PowerApps では、*エンティティ*は、レコードの形式で追跡する情報を定義します。通常は会社名、場所、製品、電子メール、電話などのプロパティが含まれます。 次に、エンティティを参照するアプリを開発して、そのデータを表示できます。 PowerApps には、組織内の一般的なシナリオをカバーする標準エンティティ (予定の追跡など) が提供されていますが、組織に固有のデータを格納するユーザー定義エンティティを作成する必要がある場合があります。

このトピックでは、会社が販売する製品の評価やコメントを表示するアプリの作成に使用できる、製品レビューと呼ばれるユーザー定義エンティティを作成する方法について説明します。

## <a name="prerequisites"></a>前提条件
この手順に従うには、以下のアイテムが必要です。
* PowerApps Plan 2 または Microsoft Flow Plan 2 ライセンス。 または、[無料の PowerApps Plan 2 試用](https://web.powerapps.com/signup?redirect=marketing&email=) にサインアップできます。
* Common Data Service 内のシステム管理者またはシステム カスタマイザー セキュリティ ロール。

## <a name="sign-in-to-powerapps"></a>PowerApps へのサインイン
[https://web.powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) で PowerApps にサインインします。

## <a name="create-an-entity"></a>エンティティの作成
1. ナビゲーション ウィンドウで、**データ**をクリックまたはタップして展開し、**エンティティ**をクリックまたはタップします。

    ![エンティティおよび詳細の一覧](./media/data-platform-cds-create-entity/entitylist.png "エンティティ リスト")

2. コマンド バーで、**新しいエンティティ**をクリックまたはタップします。

    エンティティを作成する前に、使用可能な標準エンティティの説明を [エンティティ参照](../../developer/common-data-service/reference/about-entity-reference.md) で確認します。 これらのエンティティは一般的なシナリオをカバーします。 これらのエンティティのいずれかがそのままの状態または小規模な変更後、要件を満たす場合、そのエンティティから始めることで時間を節約できます。 

3. **新しいエンティティ**ウィンドウの**表示名**ボックスで、**製品レビュー**を入力した後、オプションで説明を入力します (そのほかのユーザーがこのエンティティを使用しない場合は説明が役立ちます)。 パネルの他のフィールドは、以下のように自動入力されます。 終了したら、**次へ**をクリックします。

    * **複数形の表示名** - このフィールドには、表示名を入力すると自動入力されますが、必要に応じて変更できます。 複数形の表示名は、Common Data Service WebAPI におけるエンティティの名前であり、PowerApps またはフローからこのエンティティを操作するときに使用されます。
    * **名前** - このフィールドは、表示名を入力しても自動入力されます。 接頭辞は、環境が作成されたときにセットアップされました。作成したエンティティが、他のエンティティ名と競合せずに他の環境にエクスポートおよびインポートできることが確証されます。 Common Data Service の既定のソリューションの発行者の接頭辞の更新によって、この接頭辞を変更できます。 既存のアプリの破損を防止するため、エンティティを保存した後で名前は変更できません。

       > [!NOTE]
       > エンティティ名で [Dynamics 365 for Customer Service 埋め込みサポート情報検索](/dynamics365/customer-engagement/customer-service/set-up-knowledge-management-embedded-knowledge-search) を使用するためには、発行者の接頭辞を含む最大エンティティ名の長さは 24 文字を超えてはなりません。
     
    ![新しいエンティティ](./media/data-platform-cds-create-entity/newentitypanel.png "新しいエンティティ パネル")

4. エンティティの詳細ページで、**プライマリ名**フィールドをクリックまたはタップして**プライマリ名**ウィンドウを開き、**表示名**ボックスで、**プライマリ名**を**製品レビュー**に置き換えます。 **名前**ボックスで、**PrimaryName** を **ProductReview** に置き換え、**完了**をクリックまたはタップします。
 
    既定では、すべてのエンティティにプライマリ名フィールドが含まれており、他のエンティティとの関連付けを確立するときに検索フィールドで使用されます。 通常、プライマリ名フィールドには、エンティティに格納されたデータの名前またはプライマリ説明が格納されます。 エンティティを初めて保存する前にプライマリ名フィールドの名前および表示名を更新できます。

    ![エンティティの詳細](./media/data-platform-cds-create-entity/newentitydetails.png "新しいエンティティの詳細")

5. エンティティにフィールドを追加するには、以下を行います。
 
    a. コマンド バーで、**フィールド プロパティ**ウィンドウを開くために**フィールドの追加**をクリックまたはタップします。

    b. **表示名**ボックスで、**レビュー日**を入力します。

    c. **データの種類**ドロップダウン リストから **日付のみ**を選択します。

    d. **必須**チェック ボックスをクリックまたはタップします。
    
    e. **完了**をクリックまたはタップします。
     
    詳細については、「[エンティティでのフィールドの管理](data-platform-manage-fields.md)」を参照してください。

    > [!div class="mx-imgBorder"] 
    > ![新しいフィールド](./media/data-platform-cds-create-entity/newfieldpanel-2.png "新しいフィールド パネル")

6. 次の構成を持つ 3 つのフィールドをさらに追加するために前の手順を実行します。
    * **表示名** = 製品評価、**データの種類** = 整数。**必須**チェック ボックスをクリックまたはタップします。
    * **表示名** = レビュー担当者名、**データの種類** = テキスト
    * **表示名** = レビュー担当者コメント、**データの種類** = テキスト

    完了すると、エンティティの詳細のページにフィールドが 5 つリストされます。

    ![フィールド一覧](./media/data-platform-cds-create-entity/addedfields.png "フィールドの一覧")

    すべてのエンティティが読み取り専用システム フィールドであることに注意してください。 既定では、システム フィールドは、エンティティにあってもフィールドの一覧に表示されません。 すべてのフィールドを表示するには、**既定**から**すべて**にコマンド バーのフィルターを変更します。 エンティティに関連するメタデータの詳細については、「[エンティティ メタデータ](../../developer/common-data-service/entity-metadata.md)」を参照してください。

7. エンティティを保存し、アプリで使用できるようにするには、**エンティティの保存**をクリックします。

    製品レビュー エンティティは、データベース内のエンティティの一覧に表示されます。 表示されない場合、**既定**から**ユーザー定義**にコマンド バーのフィルターを変更します。

    > [!div class="mx-imgBorder"] 
    > ![フィルター](./media/data-platform-cds-create-entity/filter.png "フィールター選択")

## <a name="next-steps"></a>次のステップ
このトピックでは、特定の会社が販売する各製品の評価やコメントを表示するアプリの作成に使用できる、製品レビューと呼ばれるユーザー定義エンティティを作成する方法について説明しました。 次に、各製品と受け取ったレビューおよびコメントを関連付けることができるように、エンティティ間の関連付けを定義する方法について説明します (この場合は、標準製品エンティティとカスタム製品レビュー エンティティの間)。

> [!div class="nextstepaction"]
> [関連付けの作成](data-platform-entity-lookup.md)

## <a name="privacy-notice"></a>プライバシーに関する声明
Microsoft PowerApps 共通データ モデルでは、Microsoft はユーザー定義エンティティおよびフィールド名を収集し、診断システムに保存します。 この情報を使って、お客様の共通データ モデルを改善します。 アプリ作成者が作成するエンティティ名およびフィールド名は、Microsoft が PowerApps コミュニティに共通するシナリオを理解し、組織に関連するスキーマなど、サービスの標準エンティティ範囲のすきまを確認するのに役立ちます。 これらのエンティティに関連付けられたデータベース テーブル内のデータは、Microsoft によりアクセスまたは使用されず、データベースがプロビジョニングされた地域の外部にレプリケーションされません。 しかし、カスタム エンティティおよびフィールド名は、地域間でレプリケーションされ、データ保持ポリシーに基づいて削除される可能性がある点に注意してください。 マイクロソフトは、[セキュリティ センター](https://www.microsoft.com/trustcenter/Privacy/default.aspx) で詳しく説明されているとおりにプライバシー保護に努めています。

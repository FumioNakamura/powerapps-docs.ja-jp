---
title: キャンバス アプリのコンポーネントを作成する |Microsoft Docs
description: キャンバス アプリの再利用可能なコンポーネントの概要
author: yifwang
ms.service: powerapps
ms.topic: article
ms.date: 12/12/2018
ms.author: yifwang
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: cc556eaac82f910fa7044def9969c2fb8ca04c4b
ms.sourcegitcommit: a99f9458a50f6fa64706200bec97273aac20036d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/22/2019
ms.locfileid: "66034903"
---
# <a name="create-a-component-for-canvas-apps"></a>キャンバス アプリのコンポーネントを作成します。

> [!IMPORTANT]
> この機能は、引き続き実験的な既定で無効になります。 詳細については、次を参照してください。[試験的およびプレビュー機能](working-with-experimental.md)します。

コンポーネントは、アプリの作成者は、アプリまたは複数のアプリを使用するカスタム コントロールを作成できるように、キャンバス アプリの再利用可能な構成要素をします。 カスタム プロパティなどの機能を高度なコンポーネントで複雑な機能が有効にします。 この記事では、コンポーネントの概念といくつかの例を紹介します。

コンポーネントは、コントロール パターンが類似を大規模なアプリの構築に役立ちます。 コンポーネントの定義を更新する場合、アプリのすべてのインスタンスには、変更が反映されます。 ないコピーして貼り付けるコントロール、オーバーヘッドを複製するために、1 つまたは複数のコンポーネントを使用してパフォーマンスを向上できます。 コンポーネントは、共同開発を容易と外観を組織内で標準化されます。

## <a name="prerequisite"></a>前提条件

開く、**アプリ設定**画面で、**詳細設定**と、機能を有効にするだけでなくことを確認する**が改善されました。 アプリケーションのレンダリング**も有効にします。

## <a name="component-canvas"></a>コンポーネントのキャンバス

コンポーネントを作成することができます、**コンポーネント**メニューで、**挿入** タブまたは左側のナビゲーション バーで、次の図として。 この一覧は、作成時間によって並べ替えられて、アプリで定義されているコンポーネントを示します。

![コンポーネントの一覧の表示](./media/create-component/list-view.png)

採用するアプローチに関係なく、空のキャンバスが表示されたら、コンポーネント定義の一部としてコントロールを追加できます。 キャンバス内のコンポーネントを編集する場合の他のアプリの画面およびその他のアプリで同じコンポーネントのインスタンスを更新します。

画面を選択する場合は、左側のナビゲーション バーの既存のコンポーネントの一覧からコンポーネントを選択できる、または**コンポーネント**メニューで、**挿入** タブ。コンポーネントを選択すると、コントロールを挿入するのと同じように、画面上に、そのコンポーネントのインスタンスを挿入します。

## <a name="scope"></a>適用範囲

コンポーネントのプロパティを持つインターフェイスとしてカプセル化されたブラック ボックスとしてと考えます。 コントロール、コンポーネントの外部からコンポーネントにアクセスすることはできませんし、コンポーネント内のコンポーネントからの外を参照することはできません。 しようとすると、エラーが表示されます。 スコープの制限は、シンプルで統一されたにコンポーネントのデータ コントラクトを保持し、アプリ間で特に、シームレスなコンポーネントの定義更新プログラムを有効にすること。 コンポーネントのデータ コントラクトを更新するには、1 つまたは複数のカスタム プロパティを作成します。

## <a name="variables"></a>変数

コンポーネントをサポートしていない、 **UpdateContext**関数ことができますを作成および更新コンポーネントで変数を使用して、**設定**関数。 これらの変数のスコープは、コンポーネントに制限されていますが、それらにアクセスできますからコンポーネントの外部にカスタムの出力プロパティを活用することで。

## <a name="import-and-export"></a>インポートとエクスポート

別に 1 つのアプリからの 1 つまたは複数のコンポーネントをインポートするには、選択**コンポーネントをインポート**コンポーネントの一覧。 ダイアログ ボックスでは、編集するアクセス許可を持つコンポーネントが含まれているすべてのアプリが一覧表示します。 アプリを選択し、選択**インポート**のすべてのコンポーネントがそのアプリで公開された最新のバージョンをインポートします。 少なくとも 1 つのコンポーネントをインポートした後は、コピーを編集および削除する必要がないです。

> [!div class="mx-imgBorder"]
> ![インポート コンポーネント ダイアログ ボックス](./media/create-component/import-components.png)

コンポーネントをエクスポートする場合は、別のアプリにインポートできるローカル ファイルを作成します。 アプリに同じコンポーネントの修正バージョンが含まれている場合は、変更後のバージョンに置き換えたり、インポートをキャンセルするかどうかを決定するように求められます。 

## <a name="custom-properties"></a>カスタム プロパティ

コンポーネントでは、入力値を受信でき、1 つまたは複数のカスタム プロパティを作成する場合は、データを生成することができます。 これらのシナリオを選択し、高度な数式を理解する必要がありますとコントラクトをバインドします。

入力プロパティは、コンポーネントがコンポーネントで使用するデータを受信する方法です。 入力プロパティに表示されます、**プロパティ**コンポーネントのインスタンスが選択されている場合は、右側のウィンドウのタブ。 他のコントロールで標準的なプロパティを構成すると同様、式または数式、入力プロパティを構成できます。 その他のコントロールなど、プロパティ、入力、**既定**のプロパティを**テキスト入力**コントロール。

出力プロパティは、データまたはコンポーネントの状態を生成できます。 たとえば、**選択**プロパティを**ギャラリー**コントロールが出力プロパティ。 出力プロパティを作成するときに、コンポーネントの状態を参照できる他のコントロールを決定できます。

さらに、このチュートリアルでは、これらの概念について説明します。

## <a name="create-an-example-component"></a>例コンポーネントを作成します。

この例では、次の図のようなとをテキストを変更して複数の画面とアプリのどちらか一方または両方を使用して、メニュー コンポーネントを作成します。

![最終ギャラリー](./media/create-component/menu-instance.png)

1. PowerApps Studio のでは、空のアプリを作成します。

1. 左側のナビゲーション バーで、コンポーネントの一覧を開き、クリックして**新しいコンポーネント**します。

    ![コンポーネントの一覧](./media/create-component/component-list.png)

1. 新しいコンポーネントを合わせたときに、省略記号 (...) を選択して、**の名前を変更**と入力するか貼り付けます**MenuComponent**します。

1. 右側のウィンドウでコンポーネントの幅を設定**150**と高さに**250**、し、**新しいカスタム プロパティ**します。

    ![新しいプロパティ](./media/create-component/new-property.png)

1. **表示名**、**プロパティ名**、および**説明**ボックスに、入力するか貼り付けます**項目**します。

    ![表示名、プロパティ名、説明ボックス](./media/create-component/property-names.png)

    プロパティ名を指定する場合は、するときに参照するコンポーネントこの名前で数式を記述するために、スペースに含めないでください (たとえば、 **ComponentName.PropertyName**)。

    表示名が表示されます、**プロパティ**コンポーネントを選択した場合は、右側のウィンドウのタブ。 わかりやすい表示名と、その他の者がこのプロパティの目的を理解します。 **説明**でこのプロパティの表示名をポイントする場合に、ツールヒントに表示されます、**プロパティ**タブ。

1. **データ型**一覧で、**テーブル**、し、**作成**です。

    ![プロパティのデータ型](./media/create-component/property-data-type.png)

    **項目**プロパティが指定したデータ型に基づいて既定値に設定がニーズに合った値に設定することができます。 データ型を指定した場合**テーブル**または**レコード**の値を変更することも、**項目**コンポーネントに入力するデータのスキーマと一致するプロパティ。 この場合、文字列のリストを変更します。

    プロパティの名前を選択した場合、数式バーにプロパティの値を設定することができます、**プロパティ**右側のウィンドウのタブ。

    ![[プロパティ] タブのカスタム入力プロパティ](./media/create-component/properties-tab.png)

    として次の図は、編集することも、プロパティの値で、**詳細**右側のウィンドウのタブ。

1. コンポーネントの設定**項目**に次の式のプロパティ。

    ```powerapps-dot
    Table({Item:"SampleText"})
    ```

    ![数式](./media/create-component/set-component-items.png)

1. コンポーネントでは、空の垂直方向に挿入**ギャラリー**コントロール。

1. プロパティの一覧が表示されることを確認、**項目**プロパティ (ソフトウェアは既定で)、し、そのプロパティの値をこの式に設定します。

    ```powerapps-dot
    MenuComponent.Items
    ```

    これにより、**項目**のプロパティ、**ギャラリー**コントロールが読み取りに依存して、**項目**コンポーネントのプロパティを入力します。

1. 設定、**ギャラリー**コントロールの**BorderThickness**プロパティを**1**とその**TemplateSize**プロパティを**50**.

1. テンプレートで、**ギャラリー**コントロールを追加、**ラベル**コントロール。

    ![ラベルを追加し、ギャラリーの枠の設定](./media/create-component/add-label.png)

次に、画面にコンポーネントを追加し、コンポーネントを表示する文字列のテーブルを指定します。

1. 左側のナビゲーション バーで、画面の一覧を選択し、既定の画面をクリックします。

    ![既定の画面](./media/create-component/default-screen.png)

1. **挿入** タブで、開く、**コンポーネント** メニューの クリックして**MenuComponent**します。

    ![挿入します。](./media/create-component/insert.png)

    新しいコンポーネントの名前は**MenuComponent_1**既定。

1. 設定、**項目**プロパティの**MenuComponent_1**に次の式。

    ```powerapps-dot
    Table({Item:"Home"}, {Item:"Admin"}, {Item:"About"}, {Item:"Help"})
    ```

    このインスタンスが次の図に似ていますが、テキストと各インスタンスの他のプロパティをカスタマイズすることができます。

    ![最終ギャラリー](./media/create-component/menu-instance.png)

ここまでは、コンポーネントを作成し、アプリに追加します。 次に、ユーザーがメニューで選択した項目を反映する出力プロパティを作成します。

1. コンポーネントの一覧を開き、選択**MenuComponent**します。

1. 右側のウィンドウで、選択、**プロパティ**、タブを選び**新しいカスタム プロパティ**します。

1. **表示名**、**プロパティ名**、および**説明**ボックスに、入力するか貼り付けます**選択**します。

1. **プロパティ型**を選択します**出力**、し、**作成**です。

1. **詳細設定**  タブの値を設定、**選択された**ギャラリー名に数字を調整するために必要な場合、次の式のプロパティ。

    ```powerapps-dot
    Gallery1.Selected.Item
    ```

    ![詳細ウィンドウ](./media/create-component/advance.png)

1. アプリの既定の画面で、ラベルを追加し、設定、**テキスト**プロパティをこの式は、必要に応じて、コンポーネント名に数字を調整することにします。

    ```powerapps-dot
    MenuComponent_1.Selected
    ```

    なお**MenuComponent_1**コンポーネント定義の名前ではなく、インスタンスの既定の名前です。 任意のインスタンスの名前を変更することができます。

1. Alt キーを押したまま、メニューの各項目を選択します。

    **ラベル**コントロールが最後に選択したメニュー項目が反映されます。

## <a name="known-limitations"></a>既知の制限

- 、この記事の執筆時点のフォームおよびデータ テーブルが無効になっているために、データ ソースはコンポーネントでは、保存されません。
- コンポーネントで変数を作成する場合、その変数はスコープはそのコンポーネントにのみなり、アプリ変数に表示されません。
- PowerApps では、コンポーネントのコレクションをサポートしていません。
- コンポーネントは、ギャラリー、フォーム、またはデータ カードに挿入できません。
- コンポーネントのマスター インスタンスは、マスターおよびアプリにスコープを持つローカルです。 マスター インスタンスを変更する場合、アプリ内コンポーネントのコピーのみの変更が反映されます。 他のアプリでのコピーは、コンポーネントのライブラリをもう一度インポートする場合を除き、同じです。 これらのアプリ内のすべてのマスター インスタンスが自動的に検出し、更新します。
- コンポーネントをインポートするときに、メディア ファイルをパッケージ化することはできません。

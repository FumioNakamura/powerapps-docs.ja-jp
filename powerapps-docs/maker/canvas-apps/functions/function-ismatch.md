---
title: IsMatch、Match、および MatchAll 関数 |Microsoft Docs
description: 構文を含む PowerApps の IsMatch、Match、および MatchAll 関数の参照情報
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 01/15/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 7141d3b9a2ba6bf18bffe1756d0d7de048606cad
ms.sourcegitcommit: f5013108140276b3d66a9dce13a061df89609d26
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2019
ms.locfileid: "57798377"
---
# <a name="ismatch-match-and-matchall-functions-in-powerapps"></a>PowerApps の IsMatch、Match、および MatchAll 関数
パターンに基づくテキスト文字列の一致または抽出の部分をテストします。

## <a name="description"></a>説明
**IsMatch** 関数は、通常文字、事前定義済みのパターン、または[正規表現](#regular-expressions)が含まれたパターンにテキスト文字列が一致するかどうかをテストします。  **一致**と**MatchAll**内容が一致すると、サブマッチを含む関数を返します。  

**IsMatch** は、ユーザーが **[テキスト入力](../controls/control-text-input.md)** コントロールに入力した内容を検証するために使用されます。 たとえば、データ ソースに保存する前に、ユーザーが入力した電子メール アドレスが有効かどうかを確認できます。 エントリが基準に一致しない場合、エントリの修正をユーザーに求める他のコントロールを表示します。

使用**一致**パターンに一致する最初のテキスト文字列を抽出して**MatchAll**に一致するすべてのテキスト文字列を抽出します。 複雑な文字列を解析するサブマッチを抽出することもできます。   

**一致**の最初の一致が見つかると、情報のレコードを返しますと**MatchAll**見つかった一致ごとのレコードのテーブルを返します。 または複数のレコードが含まれます。

| 列 | 種類 | 説明 |
|----|----|----|
| *という名前の sub&#8209;一致またはサブ&#8209;と一致します。* | Text | 各名前付きのサブマッチは独自の列になります。 使用して名前付きのサブマッチを作成する **(?&lt;*名前*&gt;**.**)** 正規表現にします。 名前付きのサブマッチ (下記参照) 定義済みの列の 1 つとして同じ名前にある場合は、サブの一致が優先され、警告が生成されます。 この警告を回避するには、サブの一致を変更します。 |
| **FullMatch** | Text | すべての一致したテキスト文字列。 |
| **StartMatch** | Number | 入力文字列内の一致の開始位置。 文字列の最初の文字は、1 を返します。 | 
| **サブマッチ** | テキストの単一列テーブル (列**値**) | 正規表現で表示される順序で名前付きの名前のないサブマッチのテーブル。 一般に、名前付きのサブマッチは容易に扱うし、ことをお勧めします。 使用して、 [ **ForAll** ](function-forall.md)関数または[**最後**](function-first-last.md)( [ **FirstN**](function-first-last.md)(**...** )) 個々 の部分一致を使用する関数。 正規表現のサブマッチが定義されていない場合は、このテーブルが存在するが空になります。 |

これらの関数サポート[ **MatchOptions**](#match-options)します。 既定では。 
- これらの関数は、大文字と小文字を実行します。 使用**IgnoreCase**を区別しない一致を実行します。    
- **IsMatch**全体のテキスト文字列と一致する (**完了**MatchOption)、中に**一致**と**MatchAll** (テキスト文字列内で任意の場所の一致の検索**含む**MatchOption)。 使用**完了**、 **Contains**、 **BeginsWith**、または**EndsWith**シナリオで適切にします。

**IsMatch** は、テキスト文字列がパターンに一致する場合は *true* を返し、一致しない場合は *false* を返します。 **一致**返します*空白*でテストできますが一致するものが見つからない場合、 [ **IsBlank** ](function-isblank-isempty.md)関数。 **MatchAll**でテストできますが一致するものが見つからない場合、空のテーブルを返します、 [ **IsEmpty** ](function-isblank-isempty.md)関数。

使用している場合**MatchAll**テキスト文字列を分割するには、使用を検討して、 **[分割](function-split.md)** 関数を使用するより簡単かつ迅速であります。

## <a name="patterns"></a>パターン
これらの関数を使用するキーは、パターン一致を記述します。 パターンは、以下を組み合わせたテキスト文字列で記述します。

* 通常文字 (**"abc"** や **"123"** など)。
* 事前定義済みのパターン (**Letter**、**MultipleDigits**、**Email** など。 これらのパターンは **Match** 列挙型によって定義されます)。
* 正規表現コードなど、 **"\d+\s+\d+"** または **"[a ~ z] +"** します。

使用してこれらの要素を組み合わせる、[文字列連結演算子**&**](operators.md)します。 たとえば、**"abc" & Digit & "\s+"** は有効なパターンであり、後ろに 0 から 9 までの数字と少なくとも 1 つの空白文字が付いた文字 "a"、"b"、"c" に一致します。

### <a name="ordinary-characters"></a>通常文字
最も単純なパターンは、通常文字で構成された文字列です。この場合、パターンと文字列は完全に一致する必要があります。

使用する場合など、 **IsMatch**関数、文字列「こんにちは」のパターンに一致する **「こんにちは」** 正確にします。 過不足がありません。 文字列 "hello!" は 末尾に感嘆符のためのパターンに一致しません、大文字と小文字が文字"h"が正しくありません。 (この動作を変更する方法については「[MatchOptions](#match-options)」を参照してください)。

パターンの言語では、特別な目的で予約されている文字があります。 これらの文字を使用する、文字、プレフィックス、 **\\** (バック スラッシュ) 文字をそのまま使用する必要がありますか、このトピックの後半で説明されている定義済みのパターンのいずれかのことを示します。 次の表に、特殊文字の一覧を示します。

| 特殊文字 | 説明 |
| --- | --- |
| **.** |ドットまたはピリオド |
| **?** |疑問符 |
| **&#42;** |アスタリスク |
| **\+** |プラス |
| **( )** |かっこ |
| **[ ]** |角かっこ |
| **{ }** |中かっこ |
| **^** |キャレット |
| **$** |ドル記号 |
| **\|** |縦棒またはパイプ |
| **\\** |バックスラッシュ |

たとえば、"Hello?" を一致の対象にするには、 疑問符の前にバックスラッシュを付けたパターン **"Hello\\?"** を 使用します。

### <a name="predefined-patterns"></a>事前定義済みのパターン
定義済みのパターンでは、一連の文字の 1 つまたは複数の文字のシーケンスのいずれかに一致するように簡単な方法を提供します。 使用して、[文字列連結演算子**&** ](operators.md)のメンバーと、独自のテキスト文字列を結合する、**一致**列挙型。

| 一致する列挙型 | 説明 | 正規表現 |
| --- | --- | --- |
| **Any** |任意の文字と一致します。 |`.` |
| **Comma** |コンマと一致します。 |`,` |
| **Digit** |1 桁の数と一致します ("0" ～ "9")。 |`\d` |
| **Email** |ピリオド (".") が付いたドメイン名と "at" 記号 ("\@") が含まれている電子メール アドレスと一致します |`.+\@.+\\.[^\\.]{2,}` |
| **Hyphen** |ハイフンと一致します。 |`\-` |
| **LeftParen** |左丸かっこ "(" と一致します。 |`\(` |
| **Letter** |1 つの文字と一致します。 |`\p{L}` |
| **MultipleDigits** |1 つ以上の数字と一致します。 |`\d+` |
| **MultipleLetters** |1 つ以上の文字と一致します。 |`\p{L}+` |
| **MultipleNonSpaces** |空白文字 (スペース、タブ、または改行しない) を含まない 1 つ以上の文字と一致します。 |`\S+` |
| **MultipleSpaces** |空白 (スペース、タブ、または改行) を追加する 1 つ以上の文字と一致します。 |`\s+` |
| **NonSpace** |空白文字を含まない 1 つの文字と一致します。 |`\S` |
| **OptionalDigits** |0 個の数、または 1 桁以上の数と一致します。 |`\d*` |
| **OptionalLetters** |0 個以上の文字と一致します。 |`\p{L}*` |
| **OptionalNonSpaces** |空白文字を含まない 0 個以上の文字と一致します。 |`\S*` |
| **OptionalSpaces** |空白文字を含む 0 個以上の文字と一致します。 |`\s*` |
| **Period** |ピリオドまたはドット (".") と一致します。 |`\.` |
| **RightParen** |右丸かっこ ")" と一致します。 |`\)` |
| **Space** |空白文字を含む 1 つの文字と一致します。 |`\s` |

たとえば、パターン **"A" & MultipleDigits** は、後ろに 1 桁以上の数が続く文字 "A" と一致します。  

### <a name="regular-expressions"></a>正規表現
これらの関数を使用するパターンは、[正規](https://en.wikipedia.org/wiki/Regular_expression)します。 通常の文字とこのトピックの「ヘルプに記載されている定義済みのパターンは、正規表現を構築します。  

正規表現は非常に強力で、多数のプログラミング言語に対応しているうえ、さまざまな用途に使用できます。 区切り記号のランダム シーケンスのようにも多くの場合、検索できます。 この記事では、正規表現のすべての側面が豊富な情報、チュートリアル、について説明し、ツールは、web でご確認いただけます。  

さまざまな仕様では、正規表現を使用し、PowerApps は、JavaScript の方言の一種を使用します。 参照してください[正規表現構文](http://msdn.microsoft.com/library/1400241x.aspx)の概要については、構文にします。 名前付きのサブマッチ (名前付きキャプチャ グループとも呼ばれます) がサポートされています。

- サブマッチをという名前: **(?&lt;*名前*&gt; ...)**
- という名前の前方参照:  **\\k&lt;*名*&gt;**

**一致**、このトピックの「列挙型テーブルの対応する正規表現と同じ行に各列挙型が表示されます。

## <a name="match-options"></a>MatchOptions
これらの関数の動作を変更するには、文字列連結演算子を使用して組み合わせることが 1 つまたは複数のオプションを指定して (**&amp;**)。  

| MatchOptions 列挙型 | 説明 | 正規表現への影響 |
| --- | --- | --- |
| **BeginsWith** |パターンはテキストの先頭から一致する必要があります。 |正規表現の先頭に **^** が追加されます。 |
| **Complete** |既定の**IsMatch**します。 パターンは、最初から最後までのテキストの文字列全体と一致する必要があります。 |追加、 **^** を先頭に、 **$** 正規表現の末尾にします。 |
| **Contains** |既定の**一致**と**MatchAll**します。 パターンは、テキストの一部と一致する必要がありますが、一致する場所が先頭か末尾である必要はありません。 |正規表現は変更されません。 |
| **EndsWith** |パターンは、テキストの文字列の末尾に一致する必要があります。 |正規表現の末尾に **$** が追加されます。 |
| **IgnoreCase** |大文字し、小文字を同じを扱います。 既定では、照合で大文字と小文字が区別されます。 |正規表現は変更されません。 このオプションは、正規表現の標準の"i"修飾子のと同じです。  |
| **Multiline** |複数の行にまたがって照合を実行します。 |正規表現は変更されません。 このオプションは、正規表現の"m"標準の修飾子のと同じです。 |

使用して**MatchAll**は正規表現を標準の"g"修飾子を使用すると同じです。

## <a name="syntax"></a>構文
**IsMatch**( *Text*, *Pattern* [, *Options* ] )

* *Text* - 必須。 テストの対象となるテキスト文字列。
* *Pattern* - 必須。 テキスト文字列としてテストするパターン。 定義済みのパターンを連結する、**一致**列挙型の定義、または正規表現を提供します。 *パターン*任意の変数、データ ソース、またはその他の動的アプリの実行時にその変更を参照せずに、定数式をある必要があります。
* *Options* - 省略可能。 テキスト文字列の組み合わせ**MatchOptions**列挙値。 既定では **MatchOptions.Complete** が使用されます。

**Match**( *Text*, *Pattern* [, *Options* ] )

* *Text* - 必須。 一致するテキスト文字列。
* *Pattern* - 必須。 テキスト文字列として一致させるパターン。 定義済みのパターンを連結する、**一致**列挙型の定義、または正規表現を提供します。 *パターン*任意の変数、データ ソース、またはその他の動的アプリの実行時にその変更を参照せずに、定数式をある必要があります。
* *Options* - 省略可能。 テキスト文字列の組み合わせ**MatchOptions**列挙値。 既定では、 **MatchOptions.Contains**使用されます。

**MatchAll**( *Text*, *Pattern* [, *Options* ] )

* *Text* - 必須。 一致するテキスト文字列。
* *Pattern* - 必須。 テキスト文字列として一致させるパターン。 定義済みのパターンを連結する、**一致**列挙型の定義、または正規表現を提供します。 *パターン*任意の変数、データ ソース、またはその他の動的アプリの実行時にその変更を参照せずに、定数式をある必要があります。
* *Options* - 省略可能。 テキスト文字列の組み合わせ**MatchOptions**列挙値。 既定では、 **MatchOptions.Contains**使用されます。

## <a name="ismatch-examples"></a>IsMatch 例
### <a name="ordinary-characters"></a>通常文字
ここでは、**TextInput1** という名前の**テキスト入力**コントロールがアプリにあり、 ユーザーがこのコントロールに値を入力すると、それがデータベースに格納されると仮定します。   

今、ユーザーによって **TextInput1** に **Hello world** と入力されています。

| 数式 | 説明 | 結果 |
| --- | --- | --- |
| `IsMatch( TextInput1.Text, "Hello world" )` |テスト ユーザーの入力するかどうかを正確に一致文字列"Hello world"です。 |**true** |
| `IsMatch( TextInput1.Text, "Good bye" )` |テスト ユーザーの入力するかどうかを正確に一致文字列"Good bye"。 |**false** |
| `IsMatch( TextInput1.Text, "hello", Contains )` |ユーザーの入力に「こんにちは」(大文字と小文字) という単語が含まれて かどうかをテストします。 |**false** |
| `IsMatch( TextInput1.Text, "hello", Contains & IgnoreCase )` |ユーザーの入力に単語 "hello" が含まれているかどうかをテストします (大文字と小文字を区別しない)。 |**true** |

### <a name="predefined-patterns"></a>事前定義済みのパターン

|                                                            数式                                                            |                                                                説明                                                                |  結果   |
|-------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| `IsMatch( "123-45-7890", Digit & Digit & Digit & Hyphen & Digit & Digit & Hyphen & Digit & Digit & Digit & Digit )` |                                              米国の社会保障番号と一致します。                                               | **true**  |
|                                           `IsMatch( "joan@contoso.com", Email )`                                            |                                                         電子メール アドレスと一致します。                                                          | **true**  |
|                              `IsMatch( "123.456", MultipleDigits & Period & OptionalDigits )`                               |                                   一連の数字、ピリオド、0 個以上の数字と一致します。                                   | **true**  |
|                                `IsMatch( "123", MultipleDigits & Period & OptionalDigits )`                                 | 一連の数字、ピリオド、0 個以上の数字と一致します。 期間は、このパターンは一致しませんのでが一致するテキストに表示されません。 | **false** |

### <a name="regular-expressions"></a>正規表現

|                                                                              数式                                                                              |                                                                                                                                  説明                                                                                                                                   |  結果   |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|                                                                    `IsMatch( "986", "\d+" )`                                                                   |                                                                                                                    0 より大きい整数に一致します。                                                                                                                     | **true**  |
|                                                               `IsMatch( "1.02", "\d+(\.\d\d)?" )`                                                              |                                        正の通貨金額と一致します。 入力に小数点が含まれている場合、入力が小数点の後に 2 つの数値文字を含める必要がありますもします。 たとえば、3.00 は有効ですが、3.1 は無効です。                                         | **true**  |
|                                                            `IsMatch( "-4.95", "(-)?\d+(\.\d\d)?" )`                                                             |                                                        正または負の通貨金額と一致します。 入力に小数点が含まれている場合、入力が小数点の後に 2 つの数値文字を含める必要がありますもします。                                                        | **true**  |
|                                                         `IsMatch( "111-11-1111", "\d{3}-\d{2}-\d{4}" )`                                                        | 米国の社会保障番号と一致します。 入力済みの入力フィールドの形式、型、長さを検証します。 文字列と一致する必要がありますの 3 つの数値文字の後にダッシュ、次に、ダッシュ、2 つの数値文字とし、次の 4 つの数値文字で構成されます。 | **true**  |
|                                                         `IsMatch( "111-111-111", "\d{3}-\d{2}-\d{4}" )`                                                         |                                                                                               前の例と同じですが、入力内のハイフンの位置が 1 つ異なります。                                                                                               | **false** |
|                                         `IsMatch( "AStrongPasswordNot", "(?!^[0-9]\*$)(?!^[a-zA-Z]\*$)([a-zA-Z0-9]{8,10})" )`                                        |                                        8、9、または少なくとも 1 つの数字とアルファベット文字を少なくとも 1 つだけでなく、10 文字を含める必要があります、強力なパスワードを検証します。 この文字列には特殊文字を含めることができません。                                        | **false** |
| `IsMatch( "<http://microsoft.com>", "(ht&#124;f)tp(s?)\:\/\/\[0-9a-zA-Z\]([-.\w]\*[0-9a-zA-Z])\*(:(0-9)\*)\*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&%\$#_]\*)?" )` |                                                                                                                     http、https、または ftp の URL を検証します。                                                                                                                      | **true**  |

## <a name="match-and-matchall-examples"></a>一致と MatchAll 例

| 数式 | 説明 | 結果 |
|--------|------------|-----------|
| `Match( "Bob Jones <bob.jones@contoso.com>", "<(?<email>" & Match.Email & ")>"` | 連絡先情報の電子メールの部分のみを抽出します。  | {<br>電子メール:&nbsp;"bob.jones@contoso.com"、<br>FullMatch:&nbsp;"&lt;bob.jones@contoso.com>"、<br>サブマッチ:&nbsp;[&nbsp;"bob.jones@contoso.com"&nbsp;]、<br>StartMatch:11<br>}  
| `Match( "Bob Jones <InvalidEmailAddress>", "<(?<email>" & Match.Email & ")>"` | 連絡先情報の電子メールの部分のみを抽出します。 有効なアドレスが見つからない (があるは @ 記号) を返しますので、*空白*します。 | "*空白*" |  
| `Match( Language(), "(<language>\w{2})(?:-(?<script>\w{4}))?(?:-(?<region>\w{2}))?" )` | 抽出、言語の言語、スクリプト、および地域部分タグ、 **[言語](function-language.md)** 関数が返される。 これらの結果、米国を反映します。参照してください、 [**言語**関数のドキュメント](function-language.md)例についてはします。  **(?:** 演算子は、別のサブマッチを作成しなくても文字をグループ化します。 | {<br>言語:"en"、<br>スクリプト:*空白*、 <br>リージョン:「弊社」<br>FullMatch: "en-US", <br>SubMatches: [ "en", "", "US" ], <br>StartMatch:1<br>} 
| `Match( "PT2H1M39S", "PT(?:(<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" )` | ISO 8601 期間の値から時間、分、および秒を抽出します。 抽出した番号は引き続きテキスト文字列です。使用して、 [**値**](function-value.md)で算術演算を実行する前に、数に変換する関数。  | {<br> 時間:"2",<br>分:"1",<br>(秒):"39",<br>FullMatch:"PT2H1M39S"<br>サブマッチ:&nbsp;[&nbsp;「2」&nbsp;「1」&nbsp;「39」&nbsp;]、<br>StartMatch:1<br>} |

最後の例を説明しましょう。 この文字列を使用して日付/時刻値を変換する場合に、 **[時間](function-date-time.md)** 関数を渡す必要があります、名前付きのサブマッチで個別にします。 これを行うには、使用することができます、 **[ForAll](function-forall.md)** 関数の最初の操作を記録する**MatchAll**を返します。

``` powerapps-dot
First( 
    ForAll( 
        MatchAll( "PT2H1M39S", "PT(?:(?<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" ), 
        Time( Value( hours ), Value( minutes ), Value( seconds ) )
    )
).Value
```

これらの例については、追加、[ボタン](../controls/control-button.md)コントロール、 **OnSelect**プロパティをこの数式にし、ボタンを選択します。

``` powerapps-dot
Set( pangram, "The quick brown fox jumps over the lazy dog." )
```
 
| 数式 | 説明 | 結果 |
|---------|-------------|--------|
| `Match( pangram, "THE", IgnoreCase )` | 「、」テキスト内のすべての一致文字列を検索、 **pangram**変数が含まれます。 文字列には、2 つの一致が含まれています。 使用しているため、最初のメッセージだけが返されますが、**一致**なく**MatchAll**します。 サブマッチが定義されていないために、サブマッチ列が空です。  | {<br>FullMatch:"The"、<br>サブマッチ: [&nbsp;]、<br>StartMatch:32<br>} |
| `MatchAll( pangram, "the" )` | テキスト文字列内の"the"のすべての一致を検索、 **pangram**変数が含まれます。 テストでは大文字と小文字のみ"the"の 2 番目のインスタンスが見つかったです。 サブマッチが定義されていないために、サブマッチ列が空です。  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-the-one.png) |
| `MatchAll( pangram, "the", IgnoreCase )` | テキスト文字列内の"the"のすべての一致を検索、 **pangram**変数が含まれます。 ここでは、テストが大文字と小文字を区別しない、という単語の両方のインスタンスが見つかるようです。 サブマッチが定義されていないために、サブマッチ列が空です。  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-the-two.png) |
| `MatchAll( pangram, "\b\wo\w\b" )` | 中央の"o"と 3 文字の単語のすべてを検索します。 //"Brown"が除外されたこと、3 文字の語ではないと、そのため、"\b"(単語の境界) の一致に失敗するために注意してください。  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-fox-dog.png) |
| `Match( pangram, "\b\wo\w\b\s\*(?<between>\w.+\w)\s\*\b\wo\w\b" )` | "Fox"と"dog"の間のすべての文字と一致します。 | {<br>間:&nbsp;"ジャンプ&nbsp;経由で&nbsp;、&nbsp;遅延"、<br>FullMatch:&nbsp;"fox&nbsp;ジャンプ&nbsp;経由で&nbsp;、&nbsp;遅延&nbsp;dog"、<br>サブマッチ: ["jumps over レイジー"]、<br>StartMatch:17<br> } |

結果を表示する**MatchAll**ギャラリー。

1. 空の画面で空の垂直方向の挿入 **[ギャラリー](../controls/control-gallery.md)** コントロール。

2. ギャラリーの設定**項目**プロパティを**MatchAll (pangram、"\w+")** または**MatchAll (pangram MultipleLetters)** します。

    ![](media/function-ismatch/pangram-gallery1.png)

3. ギャラリーのテンプレートを選択するギャラリー コントロールの途中で「挿入 タブから項目を追加する」を選択します。 

5. 追加、 **[ラベル](../controls/control-text-box.md)** ギャラリーのテンプレートを制御します。  

4. ラベルの設定**テキスト**プロパティを**ThisItem.FullMatch**します。  
 
    ギャラリーには、テキストの例では、各単語が入力されます。  1 つの画面上のすべての単語を表示するには、ギャラリーのテンプレートとラベル コントロールのサイズを変更します。

    ![](media/function-ismatch/pangram-gallery2.png)
